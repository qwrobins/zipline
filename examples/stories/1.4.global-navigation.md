# Story 1.4: Global Navigation & Layout

## Status
Ready for Review

## Story
**As a** user,
**I want** a consistent navigation bar and page layout across the application,
**so that** I can easily navigate between Posts, Users, and Todos sections.

## Acceptance Criteria
1. Root layout component includes global navigation menu with links to: Posts (`/`), Users (`/users`), Todos (`/todos`)
2. Navigation menu uses shadcn/ui NavigationMenu component with responsive behavior
3. Active route highlighted in navigation menu
4. Mobile-responsive navigation (hamburger menu or similar pattern for small screens)
5. Layout includes proper semantic HTML (header, nav, main, footer)
6. Footer displays app name and version or simple credit
7. Page transitions are smooth without layout shift
8. Navigation menu includes visual branding (app title/logo placeholder)

## Tasks / Subtasks
- [x] Create Navigation component (AC: 1, 2, 3, 8)
  - [x] Create components/shared/navigation.tsx
  - [x] Import NavigationMenu from shadcn/ui
  - [x] Add navigation links: Posts (/), Users (/users), Todos (/todos)
  - [x] Add visual branding (app title or logo placeholder)
  - [x] Style navigation with Tailwind CSS
- [x] Implement active route highlighting (AC: 3)
  - [x] Use Next.js usePathname hook to get current route
  - [x] Apply active styles to current route link
  - [x] Test active state on all routes
- [x] Make navigation mobile-responsive (AC: 4)
  - [x] Create mobile navigation state (open/closed)
  - [x] Add hamburger menu icon for mobile (use shadcn/ui Button or custom icon)
  - [x] Implement responsive breakpoints (hide mobile menu on desktop)
  - [x] Add mobile menu drawer or dropdown
  - [x] Test navigation on mobile viewport sizes
- [x] Create Footer component (AC: 6)
  - [x] Create components/shared/footer.tsx
  - [x] Add app name and version or credit text
  - [x] Style footer with Tailwind CSS
  - [x] Make footer responsive
- [x] Update root layout with semantic HTML (AC: 5)
  - [x] Update app/layout.tsx to include Navigation and Footer
  - [x] Wrap navigation in <header> and <nav> tags
  - [x] Wrap page content in <main> tag
  - [x] Wrap footer in <footer> tag
  - [x] Verify semantic HTML structure
- [x] Optimize for smooth page transitions (AC: 7)
  - [x] Test navigation transitions between routes
  - [x] Ensure no layout shift during navigation
  - [x] Add loading states if needed (use loading.tsx in route segments)
  - [x] Verify smooth transitions on mobile and desktop
- [x] Test navigation across all routes
  - [x] Test Posts link navigates to /
  - [x] Test Users link navigates to /users
  - [x] Test Todos link navigates to /todos
  - [x] Verify active route highlighting works
  - [x] Test mobile menu open/close functionality
  - [x] Test responsive behavior at various screen sizes

## Dev Notes

### Navigation Component Structure
[Source: docs/architecture/unified-project-structure.md, docs/architecture/components.md]

Create the Navigation component at `components/shared/navigation.tsx`:

```typescript
'use client';

import Link from 'next/link';
import { usePathname } from 'next/navigation';
import {
  NavigationMenu,
  NavigationMenuItem,
  NavigationMenuLink,
  NavigationMenuList,
} from '@/components/ui/navigation-menu';
import { Button } from '@/components/ui/button';
import { Menu } from 'lucide-react'; // or use your preferred icon library
import { useState } from 'react';

export function Navigation() {
  const pathname = usePathname();
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  const isActive = (path: string) => {
    if (path === '/') return pathname === '/';
    return pathname.startsWith(path);
  };

  return (
    <header className="border-b">
      <div className="container mx-auto px-4">
        <div className="flex h-16 items-center justify-between">
          {/* Logo/Brand */}
          <div className="flex items-center">
            <Link href="/" className="text-xl font-bold">
              Mini Social Feed
            </Link>
          </div>

          {/* Desktop Navigation */}
          <NavigationMenu className="hidden md:flex">
            <NavigationMenuList>
              <NavigationMenuItem>
                <Link href="/" legacyBehavior passHref>
                  <NavigationMenuLink
                    className={/* active styles */}
                  >
                    Posts
                  </NavigationMenuLink>
                </Link>
              </NavigationMenuItem>
              {/* Add Users and Todos links */}
            </NavigationMenuList>
          </NavigationMenu>

          {/* Mobile Menu Button */}
          <Button
            variant="ghost"
            className="md:hidden"
            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
          >
            <Menu />
          </Button>
        </div>

        {/* Mobile Menu */}
        {mobileMenuOpen && (
          <div className="md:hidden pb-4">
            {/* Mobile navigation links */}
          </div>
        )}
      </div>
    </header>
  );
}
```

### shadcn/ui NavigationMenu Component
[Source: docs/architecture/tech-stack.md]

The NavigationMenu component should have been installed in Story 1.2. Verify it exists at `components/ui/navigation-menu.tsx`.

If not installed, run:
```bash
pnpm dlx shadcn-ui@latest add navigation-menu
```

### Active Route Highlighting
[Source: docs/architecture/frontend-architecture.md]

Use Next.js `usePathname` hook to determine the active route:

```typescript
'use client';

import { usePathname } from 'next/navigation';

export function Navigation() {
  const pathname = usePathname();

  const isActive = (path: string) => {
    if (path === '/') return pathname === '/';
    return pathname.startsWith(path);
  };

  // Use isActive to apply active styles
}
```

Apply active styles using Tailwind CSS:
```typescript
<Link
  href="/"
  className={`px-4 py-2 rounded-md ${
    isActive('/')
      ? 'bg-primary text-primary-foreground'
      : 'hover:bg-accent'
  }`}
>
  Posts
</Link>
```

### Mobile-Responsive Navigation
[Source: docs/architecture/coding-standards.md]

Implement mobile navigation using Tailwind responsive breakpoints:

- Use `md:hidden` to show mobile menu button only on small screens
- Use `hidden md:flex` to show desktop navigation only on medium+ screens
- Consider using shadcn/ui Sheet component for mobile drawer (optional)

Alternative: Install Sheet component for better mobile navigation:
```bash
pnpm dlx shadcn-ui@latest add sheet
```

Then use Sheet for mobile menu:
```typescript
import { Sheet, SheetContent, SheetTrigger } from '@/components/ui/sheet';

<Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>
  <SheetTrigger asChild>
    <Button variant="ghost" className="md:hidden">
      <Menu />
    </Button>
  </SheetTrigger>
  <SheetContent side="left">
    {/* Mobile navigation links */}
  </SheetContent>
</Sheet>
```

### Footer Component
[Source: docs/architecture/unified-project-structure.md]

Create a simple Footer component at `components/shared/footer.tsx`:

```typescript
export function Footer() {
  return (
    <footer className="border-t mt-auto">
      <div className="container mx-auto px-4 py-6">
        <div className="text-center text-sm text-muted-foreground">
          <p>Mini Social Feed &copy; {new Date().getFullYear()}</p>
          <p>Built with Next.js 15 and shadcn/ui</p>
        </div>
      </div>
    </footer>
  );
}
```

### Root Layout Structure
[Source: docs/architecture/unified-project-structure.md, docs/architecture/coding-standards.md]

Update `app/layout.tsx` with semantic HTML:

```typescript
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import './globals.css';
import { Providers } from './providers';
import { Navigation } from '@/components/shared/navigation';
import { Footer } from '@/components/shared/footer';
import { Toaster } from 'sonner';

const inter = Inter({ subsets: ['latin'] });

export const metadata: Metadata = {
  title: 'Mini Social Feed',
  description: 'A modern social feed application built with Next.js 15',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en" suppressHydrationWarning>
      <body className={inter.className}>
        <Providers>
          <div className="flex min-h-screen flex-col">
            <Navigation />
            <main className="flex-1">
              {children}
            </main>
            <Footer />
          </div>
        </Providers>
        <Toaster />
      </body>
    </html>
  );
}
```

### Semantic HTML Requirements
[Source: docs/architecture/coding-standards.md]

The layout must include proper semantic HTML:
- `<header>`: Contains the navigation
- `<nav>`: Wraps navigation links
- `<main>`: Contains page content
- `<footer>`: Contains footer content

This improves accessibility and SEO.

### Smooth Page Transitions
[Source: docs/architecture/frontend-architecture.md]

Next.js App Router provides smooth transitions by default. To prevent layout shift:

1. Use consistent container widths (e.g., `container mx-auto`)
2. Set fixed heights for navigation and footer
3. Use Suspense boundaries with loading states
4. Add `loading.tsx` files in route segments for loading UI

Example loading state:
```typescript
// app/loading.tsx
import { Skeleton } from '@/components/ui/skeleton';

export default function Loading() {
  return (
    <div className="container mx-auto py-8">
      <Skeleton className="h-8 w-64 mb-4" />
      <Skeleton className="h-64 w-full" />
    </div>
  );
}
```

### Visual Branding
[Source: Epic requirements]

Add a simple app title/logo placeholder. If a logo is needed later, place it in `/public/images/` and use Next.js Image component:

```typescript
import Image from 'next/image';

<Link href="/" className="flex items-center gap-2">
  <Image src="/images/logo.svg" alt="Logo" width={32} height={32} />
  <span className="text-xl font-bold">Mini Social Feed</span>
</Link>
```

### Accessibility Requirements
[Source: docs/architecture/tech-stack.md, docs/architecture/coding-standards.md]

- All interactive elements must have proper ARIA labels and keyboard navigation (NFR17)
- Navigation links should be keyboard accessible
- Mobile menu button should have aria-label
- Use semantic HTML for better screen reader support

Example:
```typescript
<Button
  variant="ghost"
  className="md:hidden"
  onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
  aria-label="Toggle mobile menu"
  aria-expanded={mobileMenuOpen}
>
  <Menu />
</Button>
```

### Responsive Breakpoints
[Source: Tailwind CSS defaults]

Tailwind default breakpoints:
- `sm`: 640px
- `md`: 768px
- `lg`: 1024px
- `xl`: 1280px
- `2xl`: 1536px

Use `md:` prefix for desktop navigation (768px+).

### File Structure
[Source: docs/architecture/unified-project-structure.md]

```
components/
└── shared/                  # Shared components
    ├── navigation.tsx       # Global navigation
    ├── footer.tsx           # Global footer
    └── loading-skeleton.tsx # Loading states (if needed)

app/
├── layout.tsx               # Root layout with Navigation and Footer
├── loading.tsx              # Global loading UI
└── providers.tsx            # React Query and Theme providers
```

### Testing
[Source: docs/architecture/testing-strategy.md]

For this story, focus on manual testing:
- Navigate to each route (/, /users, /todos) and verify navigation works
- Verify active route is highlighted correctly
- Test mobile menu at various screen sizes (320px, 768px, 1024px)
- Test keyboard navigation (Tab through links, Enter to navigate)
- Verify smooth transitions without layout shift
- Test with browser DevTools responsive mode
- Verify semantic HTML structure in browser inspector

### File Naming Conventions
[Source: docs/architecture/coding-standards.md]

- Components: PascalCase (e.g., `Navigation.tsx`, `Footer.tsx`)
- Use kebab-case for filenames (e.g., `navigation.tsx`, `footer.tsx`)

### Coding Standards
[Source: docs/architecture/coding-standards.md]

- Use 'use client' directive for client components (Navigation uses hooks)
- Prefer composition over prop drilling
- All interactive elements must have proper ARIA labels
- Use Tailwind CSS for styling (no inline styles)
- Use Next.js Link component for navigation (not <a> tags)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-30 | 1.0 | Initial story creation | Bob (Scrum Master) |
| 2025-09-30 | 1.1 | Implementation complete - Navigation and Footer components created, semantic HTML layout, mobile responsive, all tests passed | James (Dev) |

## Dev Agent Record

### Agent Model Used
claude-sonnet-4-5-20250929

### Debug Log References
No critical issues encountered during implementation.

### Completion Notes
Successfully implemented global navigation and layout with all acceptance criteria met:
- Created Navigation component with shadcn/ui NavigationMenu
- Implemented active route highlighting using usePathname hook
- Built mobile-responsive navigation with hamburger menu using lucide-react icons
- Created Footer component with app name and credits
- Updated root layout with proper semantic HTML structure (<header>, <nav>, <main>, <footer>)
- Added loading.tsx for smooth page transitions
- Created placeholder routes for /users and /todos for testing
- All tests passed: build successful, linting clean, manual testing verified

Technical decisions:
- Used lucide-react for Menu/X icons instead of Radix icons for better icon variety
- Implemented simple mobile menu dropdown instead of Sheet component for lighter bundle size
- Added suppressHydrationWarning to html tag for theme provider compatibility

### File List
**New Files:**
- components/shared/navigation.tsx - Main navigation component with desktop/mobile views
- components/shared/footer.tsx - Footer component with app credits
- app/loading.tsx - Global loading skeleton for route transitions
- app/users/page.tsx - Placeholder Users page for testing
- app/todos/page.tsx - Placeholder Todos page for testing
- components.json - shadcn/ui configuration file

**Modified Files:**
- app/layout.tsx - Added Navigation and Footer with semantic HTML structure, updated metadata
- package.json - Added dependencies: @radix-ui/react-navigation-menu, @radix-ui/react-icons, lucide-react, clsx, tailwind-merge
- components/ui/navigation-menu.tsx - Generated by shadcn/ui
- components/ui/button.tsx - Generated by shadcn/ui

## QA Results
_To be filled by QA Agent_